<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GeoNet J.S Aerospace</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0b0f1a;color:#fff}
header{padding:20px;background:#141a2e;text-align:center;font-size:24px;font-weight:bold;color:#0af}
.container{padding:20px;display:flex;flex-wrap:wrap;gap:20px;justify-content:center}
.card{background:#141a2e;border-radius:12px;padding:15px;flex:1 1 300px;max-width:400px;box-shadow:0 0 15px rgba(0,0,0,.5)}
.card h2{margin-top:0;color:#0af}
.card p,label{margin:5px 0}
img,video{max-width:100%;border-radius:10px;margin-top:10px}
a{color:#0af;word-break:break-word}
.footer{position:fixed;bottom:10px;right:10px;color:#0af;font-size:12px}
</style>
</head>
<body>

<header>GeoNet J.S Aerospace</header>

<div class="container">

<div class="card" id="infoCard">
<h2>Información</h2>
<p><strong>Lanzamientos:</strong> <span id="infoLanzamientos">-</span></p>
<p><strong>Planos Orbitales:</strong> <span id="infoPlanos">-</span></p>
<p><strong>N° de Satélites:</strong> <span id="infoSat">-</span></p>
</div>

<div class="card" id="launchesCard">
<h2>Lanzamientos</h2>
<div id="launchesContent">Cargando...</div>
</div>

<div class="card" id="galleryCard">
<h2>Galería</h2>
<div id="galleryContent">Cargando...</div>
</div>

</div>

<div class="footer">Versión: V1.0</div>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {getFirestore,doc,getDoc,getDocs,collection} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const app = initializeApp({
  apiKey:"TU_API_KEY",
  authDomain:"geonet-js-aerospace.firebaseapp.com",
  projectId:"geonet-js-aerospace"
});
const db = getFirestore(app);

// Información
async function loadInfo(){
  const docSnap = await getDoc(doc(db,"Config","info"));
  if(docSnap.exists()){
    const data = docSnap.data();
    document.getElementById("infoLanzamientos").textContent = data.lanzamientos ?? "-";
    document.getElementById("infoPlanos").textContent = data.planos_orbitales ?? "-";
    document.getElementById("infoSat").textContent = data.satelites ?? "-";
  }
}
loadInfo();

// Lanzamientos
function renderMedia(url){
  if(url.match(/\.(jpg|jpeg|png|gif)$/i)) return `<img src="${url}">`;
  if(url.match(/\.(mp4|webm|ogg)$/i)) return `<video controls src="${url}"></video>`;
  return `<a href="${url}" target="_blank">${url}</a>`;
}

async function loadLaunches(){
  const container = document.getElementById("launchesContent");
  container.innerHTML="";
  const snaps = await getDocs(collection(db,"launches"));
  if(snaps.empty){container.textContent="No hay lanzamientos disponibles."; return;}
  snaps.forEach(d=>{
    const data = d.data();
    let fechaDisplay="-";
    if(data.tipo==="FECHA" && data.fecha) fechaDisplay = new Date(data.fecha).toLocaleString();
    if(data.tipo==="NET" && data.net) fechaDisplay = data.net;
    let galeriaHTML="-";
    if(data.galeria?.length) galeriaHTML = data.galeria.map(url=>renderMedia(url)).join("");
    const div = document.createElement("div");
    div.innerHTML=`<p><strong>${data.nombre}</strong></p>
                   <p>Vehículo: ${data.vehiculo || "-"}</p>
                   <p>Estado: ${data.estado || "-"}</p>
                   <p>Fecha/NET: ${fechaDisplay}</p>
                   <p>Carga: ${data.carga || "-"}</p>
                   <div>${galeriaHTML}</div>
                   <hr>`;
    container.appendChild(div);
  });
}
loadLaunches();

// Galería
async function loadGallery(){
  const container = document.getElementById("galleryContent");
  container.innerHTML="";
  const snaps = await getDocs(collection(db,"gallery"));
  if(snaps.empty){container.textContent="No hay elementos en la galería."; return;}
  snaps.forEach(d=>{
    const data = d.data();
    container.innerHTML += renderMedia(data.url);
  });
}
loadGallery();
</script>
</body>
</html>