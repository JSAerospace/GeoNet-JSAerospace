<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>GeoNet J.S Aerospace</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
  margin:0;
  font-family:Arial, sans-serif;
  background:#0b0f1a;
  color:#fff;
}
header {
  background:#141a2e;
  padding:20px;
  text-align:center;
  font-size:26px;
  font-weight:bold;
  box-shadow:0 2px 5px rgba(0,0,0,0.5);
  transition: background 0.3s;
}
section {
  padding:20px;
}
.card {
  background:#141a2e;
  border-radius:12px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 0 10px rgba(0,0,0,0.4);
  opacity:0;
  transform:translateY(20px);
  animation:fadeInUp 0.6s forwards;
}
h2 {
  margin-top:0;
  margin-bottom:10px;
  border-bottom:1px solid #0af;
  padding-bottom:5px;
}
.flex {
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}
.card img, .card video {
  max-width:100%;
  border-radius:8px;
  margin-top:10px;
}
.card-launch, .card-orbit {
  padding:10px;
  background:#1a2030;
  border-radius:10px;
  box-shadow:0 0 5px rgba(0,0,0,0.5);
  margin-bottom:10px;
  opacity:0;
  transform:translateY(10px);
  animation:fadeInUp 0.5s forwards;
}
.version {
  position:fixed;
  bottom:5px;
  right:10px;
  font-size:12px;
  color:#0af;
}
@keyframes fadeInUp {
  to {opacity:1; transform:translateY(0);}
}
</style>
</head>
<body>

<header>GeoNet J.S Aerospace</header>

<section id="infoSection">
  <h2>Información</h2>
  <div class="card">
    <p><strong>Lanzamientos:</strong> <span id="infoLanzamientos">-</span></p>
    <p><strong>Planos Orbitales:</strong> <span id="infoPlanos">-</span></p>
    <p><strong>Satélites:</strong> <span id="infoSat">-</span></p>
  </div>
</section>

<section id="launchesSection">
  <h2>Lanzamientos</h2>
  <div id="launchesContainer"></div>
</section>

<section id="planosSection">
  <h2>Planos Orbitales</h2>
  <div id="planosContainer"></div>
</section>

<section id="galeriaSection">
  <h2>Galería</h2>
  <div id="galeriaContainer" class="flex"></div>
</section>

<div class="version">V5.2</div>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {getFirestore, doc, getDoc, getDocs, collection} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const app = initializeApp({
  apiKey:"TU_API_KEY",
  authDomain:"geonet-js-aerospace.firebaseapp.com",
  projectId:"geonet-js-aerospace"
});
const db = getFirestore(app);

// Renderizar media: imagen, video o link
function renderMedia(url){
  if(url.match(/\.(jpg|jpeg|png|gif)$/i)) return `<img src="${url}" alt="media">`;
  if(url.match(/\.(mp4|webm|ogg)$/i)) return `<video controls src="${url}"></video>`;
  return `<a href="${url}" target="_blank" style="color:#0af">${url}</a>`;
}

// Información general
async function loadInfo(){
  const docSnap = await getDoc(doc(db,"Config","info"));
  if(docSnap.exists()){
    const data = docSnap.data();
    document.getElementById("infoLanzamientos").textContent = data.lanzamientos || "-";
    document.getElementById("infoPlanos").textContent = data.planos_orbitales || "-";
    document.getElementById("infoSat").textContent = data.satelites || "-";
  }
}
loadInfo();

// Lanzamientos
async function loadLaunches(){
  const container = document.getElementById("launchesContainer");
  container.innerHTML="";
  const snaps = await getDocs(collection(db,"launches"));
  let delay=0;
  snaps.forEach(d=>{
    const data = d.data();
    let fechaDisplay="-";
    if(data.tipo==="FECHA" && data.fecha) fechaDisplay=new Date(data.fecha).toLocaleString();
    if(data.tipo==="NET" && data.net) fechaDisplay=data.net;

    let galeriaHTML="-";
    if(data.galeria?.length) galeriaHTML = data.galeria.map(renderMedia).join("");

    const card = document.createElement("div");
    card.className="card-launch";
    card.style.animationDelay = `${delay}s`;
    delay+=0.1;
    card.innerHTML=`
      <strong>Nombre:</strong> ${data.nombre}<br>
      <strong>Vehículo:</strong> ${data.vehiculo || "-"}<br>
      <strong>Estado:</strong> ${data.estado || "-"}<br>
      <strong>Fecha/NET:</strong> ${fechaDisplay}<br>
      <strong>Carga:</strong> ${data.carga || "-"}<br>
      <strong>Galería:</strong><br>${galeriaHTML}
    `;
    container.appendChild(card);
  });
}
loadLaunches();

// Planos Orbitales
async function loadPlanos(){
  const container = document.getElementById("planosContainer");
  container.innerHTML="";
  const snaps = await getDocs(collection(db,"planos"));
  let delay=0;
  snaps.forEach(d=>{
    const data = d.data();
    const card = document.createElement("div");
    card.className="card-orbit";
    card.style.animationDelay = `${delay}s`;
    delay+=0.1;
    card.innerHTML=`
      <strong>Nombre:</strong> ${data.nombre}<br>
      <strong>Planeta:</strong> ${data.planeta}<br>
      <strong>Altitud:</strong> ${data.altitud} km<br>
      <strong>Inclinación:</strong> ${data.inclinacion}°<br>
      <strong>N° de Satélites:</strong> ${data.satelites || "-"}<br>
    `;
    container.appendChild(card);
  });
}
loadPlanos();

// Galería
async function loadGaleria(){
  const container = document.getElementById("galeriaContainer");
  container.innerHTML="";
  const snaps = await getDocs(collection(db,"gallery"));
  let delay=0;
  snaps.forEach(d=>{
    const div = document.createElement("div");
    div.style.animation = "fadeInUp 0.5s forwards";
    div.style.animationDelay = `${delay}s`;
    delay+=0.1;
    div.innerHTML = renderMedia(d.data().url);
    container.appendChild(div);
  });
}
loadGaleria();
</script>
</body>
</html>